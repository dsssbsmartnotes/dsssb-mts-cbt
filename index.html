<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>DSSSB Smart Notes â€“ Pro App</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
/* ===== VARIABLES & CSS ===== */
:root {
  --primary: #4361ee; --primary-dark: #3a0ca3; --success: #10b981;
  --bg: #f3f4f6; --card-bg: #ffffff; --text-main: #1f2937; --text-sub: #6b7280;
  --border: #e5e7eb; --header-grad: linear-gradient(135deg, #4361ee, #3a0ca3);
  --nav-height: 65px;
}
[data-theme="dark"] {
  --primary: #4cc9f0; --primary-dark: #4361ee; --bg: #111827;
  --card-bg: #1f2937; --text-main: #f9fafb; --text-sub: #9ca3af;
  --border: #374151; --header-grad: linear-gradient(135deg, #1e1e2e, #2d2d44);
}
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
body { margin: 0; font-family: 'Poppins', sans-serif; background: var(--bg); color: var(--text-main); padding-bottom: calc(var(--nav-height) + 20px); }

/* HEADER */
.header { background: var(--header-grad); color: #fff; padding: 25px 20px 35px; border-bottom-left-radius: 30px; border-bottom-right-radius: 30px; display: flex; justify-content: space-between; align-items: center; position: relative; z-index: 10; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
.header h1 { margin: 0; font-size: 22px; font-weight: 700; }
.header p { margin: 4px 0 0; font-size: 13px; opacity: 0.9; }
.theme-btn { background: rgba(255,255,255,0.2); border: none; color: #fff; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 18px; cursor: pointer; }

/* SEARCH */
.search-container { padding: 0 20px; margin-top: -25px; position: relative; z-index: 20; }
.search-box { background: var(--card-bg); padding: 8px 15px; border-radius: 16px; display: flex; align-items: center; box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1); border: 1px solid var(--border); }
.search-box input { width: 100%; padding: 10px 0; border: none; background: transparent; outline: none; font-size: 15px; color: var(--text-main); margin-left: 10px; font-family: inherit; }

/* SOCIAL BUTTONS */
.social-bar { display: flex; gap: 10px; padding: 15px 20px 5px; }
.social-btn { flex: 1; display: flex; align-items: center; justify-content: center; gap: 8px; padding: 12px; border-radius: 12px; text-decoration: none; font-weight: 600; font-size: 13px; color: white; box-shadow: 0 4px 6px rgba(0,0,0,0.1); transition: transform 0.2s; }
.social-btn:active { transform: scale(0.97); }
.tg-btn { background: linear-gradient(135deg, #229ED9, #0088cc); }
.yt-btn { background: linear-gradient(135deg, #ff0000, #cc0000); }

/* FILTERS */
.filters-wrapper { padding: 15px 20px 10px; overflow-x: auto; white-space: nowrap; scrollbar-width: none; }
.filters-wrapper::-webkit-scrollbar { display: none; }
.filter-btn { padding: 8px 16px; border-radius: 20px; border: 1px solid var(--border); background: var(--card-bg); color: var(--text-sub); font-weight: 500; font-size: 13px; margin-right: 8px; cursor: pointer; transition: 0.2s; }
.filter-btn.active { background: var(--text-main); color: #fff; border-color: var(--text-main); }

/* CARDS */
.section { padding: 10px 20px; }
.card { background: var(--card-bg); border-radius: 18px; padding: 18px; margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05); border: 1px solid var(--border); position: relative; }
.card.completed { border-left: 5px solid var(--success); opacity: 0.85; }
.card.completed::after { content: "âœ” DONE"; position: absolute; top: 10px; right: 10px; font-size: 9px; background: #d1fae5; color: #065f46; padding: 2px 6px; border-radius: 4px; font-weight: 700; }
.card h3 { margin: 0; font-size: 15px; font-weight: 600; color: var(--text-main); display: flex; align-items: center; gap: 8px; }
.meta-info { margin-top: 6px; font-size: 12px; color: var(--text-sub); }
.start-btn { background: var(--primary); color: #fff; padding: 8px 20px; border-radius: 50px; font-size: 13px; font-weight: 600; text-decoration: none; box-shadow: 0 4px 10px rgba(67, 97, 238, 0.3); }
.action-area { display: flex; flex-direction: column; align-items: flex-end; gap: 10px; }
.icon-actions { display: flex; gap: 15px; }
.action-icon { font-size: 18px; color: #ccc; cursor: pointer; transition: color 0.2s; }
.action-icon.saved { color: #ef4444; }
.action-icon.done-active { color: var(--success); }
.badge { font-size: 9px; padding: 3px 6px; border-radius: 4px; font-weight: 700; }
.badge-HOT { background: #fee2e2; color: #b91c1c; } .badge-NEW { background: #dcfce7; color: #15803d; } .badge-MOCK { background: #e0e7ff; color: #4338ca; }

/* BOTTOM NAV */
.bottom-nav { position: fixed; bottom: 0; left: 0; width: 100%; height: var(--nav-height); background: var(--card-bg); box-shadow: 0 -5px 15px rgba(0,0,0,0.05); display: flex; justify-content: space-around; align-items: center; z-index: 100; border-top: 1px solid var(--border); }
.nav-item { display: flex; flex-direction: column; align-items: center; font-size: 11px; color: var(--text-sub); cursor: pointer; flex: 1; height: 100%; justify-content: center; }
.nav-item.active { color: var(--primary); font-weight: 600; }
.nav-item i { font-size: 20px; margin-bottom: 4px; }

/* MODAL */
.modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 200; display: none; justify-content: center; align-items: center; padding: 20px; }
.modal { background: var(--card-bg); width: 100%; max-width: 320px; border-radius: 20px; padding: 25px; text-align: center; animation: slideUp 0.3s ease; }
@keyframes slideUp { from {transform: translateY(20px); opacity:0;} to {transform: translateY(0); opacity:1;} }
.stat-grid { display: flex; gap: 10px; margin: 20px 0; }
.stat-box { flex: 1; background: var(--bg); padding: 15px; border-radius: 12px; }
.stat-num { font-size: 24px; font-weight: 700; color: var(--primary); }
</style>
</head>
<body>

<div class="header">
  <div class="header-text"><h1 id="greeting">Hello Student</h1><p>Keep tracking your progress</p></div>
  <button class="theme-btn" onclick="toggleTheme()"><i class="fas fa-moon"></i></button>
</div>

<div class="search-container">
  <div class="search-box"><i class="fas fa-search" style="color:var(--text-sub)"></i><input type="text" id="searchInput" placeholder="Search tests..."></div>
</div>

<div class="social-bar">
  <a href="https://t.me/DSSSBSmartNotes" target="_blank" class="social-btn tg-btn">
    <i class="fab fa-telegram-plane"></i> Telegram
  </a>
  <a href="https://youtube.com/@rankshotofficial?si=xHUs3TVITagePD7T" target="_blank" class="social-btn yt-btn">
    <i class="fab fa-youtube"></i> YouTube
  </a>
</div>

<div class="filters-wrapper">
  <button class="filter-btn active" data-filter="all">All</button>
  <button class="filter-btn" data-filter="english">English</button>
  <button class="filter-btn" data-filter="reasoning">Reasoning</button>
  <button class="filter-btn" data-filter="gk">GK</button>
  <button class="filter-btn" data-filter="maths">Maths</button>
  <button class="filter-btn" data-filter="hindi">Hindi</button>
</div>

<div class="section" id="mainContainer">
  </div>

<div class="modal-overlay" id="profileModal">
  <div class="modal">
    <div style="font-size:40px; margin-bottom:10px;">ðŸŽ“</div>
    <h2 style="margin:0;">My Progress</h2>
    <div class="stat-grid">
      <div class="stat-box"><div class="stat-num" id="statCompleted">0</div><div style="font-size:12px">Completed</div></div>
      <div class="stat-box"><div class="stat-num" id="statSaved">0</div><div style="font-size:12px">Saved</div></div>
    </div>
    <button onclick="document.getElementById('profileModal').style.display='none'" style="background:var(--text-main); color:#fff; border:none; padding:10px 25px; border-radius:20px;">Close</button>
  </div>
</div>

<div class="bottom-nav">
  <div class="nav-item active" onclick="switchTab('home', this)"><i class="fas fa-home"></i><span>Home</span></div>
  <div class="nav-item" onclick="switchTab('saved', this)"><i class="fas fa-heart"></i><span>Saved</span></div>
  <div class="nav-item" onclick="openProfile()"><i class="fas fa-user-circle"></i><span>Profile</span></div>
</div>

<script src="data.js"></script> 
<script>
let savedTests = JSON.parse(localStorage.getItem("savedTests")) || [];
let doneTests = JSON.parse(localStorage.getItem("doneTests")) || [];
let currentTab = 'home';
let currentCategory = 'all';

function init(){
  const h = new Date().getHours();
  document.getElementById("greeting").innerText = h<12?"Good Morning â˜€ï¸":h<18?"Good Afternoon ðŸŒ¤ï¸":"Good Evening ðŸŒ™";
  if(localStorage.getItem("theme")==="dark") document.body.setAttribute("data-theme","dark");
  renderTests();
  updateStats();
}

function renderTests() {
  const container = document.getElementById("mainContainer");
  const searchVal = document.getElementById("searchInput").value.toLowerCase();
  container.innerHTML = `<div style="margin-bottom:15px; font-size:14px; font-weight:600; color:var(--text-sub)"><i class="fas fa-layer-group"></i> ${currentTab==='saved'?'Saved Tests':'Available Tests'}</div>`;
  
  let visibleCount = 0;

  // Check if database exists
  if(typeof testDatabase !== 'undefined') {
    testDatabase.forEach(test => {
      let show = true;
      if(currentTab === 'saved' && !savedTests.includes(test.id)) show = false;
      if(currentCategory !== 'all' && test.category !== currentCategory) show = false;
      if(!test.title.toLowerCase().includes(searchVal)) show = false;

      if(show){
        visibleCount++;
        const isSaved = savedTests.includes(test.id);
        const isDone = doneTests.includes(test.id);
        const badgeHTML = test.badge ? `<span class="badge badge-${test.badge}">${test.badge}</span>` : '';
        
        const html = `
        <div class="card ${isDone?'completed':''}" data-id="${test.id}">
          <div class="card-left">
            <h3>${test.title} ${badgeHTML}</h3>
            <div class="meta-info">ðŸ”¥ ${test.attempts} Attempts</div>
          </div>
          <div class="action-area">
            <a href="${test.url}" class="start-btn">Start</a>
            <div class="icon-actions">
              <i class="fas fa-check-circle action-icon btn-done ${isDone?'done-active':''}" onclick="toggleDone('${test.id}')"></i>
              <i class="fas fa-heart action-icon btn-save ${isSaved?'saved':''}" onclick="toggleSave('${test.id}')"></i>
            </div>
          </div>
        </div>`;
        container.innerHTML += html;
      }
    });
  }

  if(visibleCount === 0) container.innerHTML += `<p style="text-align:center; color:var(--text-sub); margin-top:30px;">No tests found.</p>`;
}

function toggleSave(id){
  if(savedTests.includes(id)) savedTests = savedTests.filter(i => i !== id);
  else savedTests.push(id);
  localStorage.setItem("savedTests", JSON.stringify(savedTests));
  renderTests(); updateStats();
}

function toggleDone(id){
  if(doneTests.includes(id)) doneTests = doneTests.filter(i => i !== id);
  else doneTests.push(id);
  localStorage.setItem("doneTests", JSON.stringify(doneTests));
  renderTests(); updateStats();
}

// Event Listeners
document.querySelectorAll(".filter-btn").forEach(btn => {
  btn.addEventListener("click", () => {
    document.querySelectorAll(".filter-btn").forEach(b => b.classList.remove("active"));
    btn.classList.add("active");
    currentCategory = btn.getAttribute("data-filter");
    renderTests();
  });
});
document.getElementById("searchInput").addEventListener("input", renderTests);

function switchTab(tab, el){
  document.querySelectorAll(".nav-item").forEach(n => n.classList.remove("active"));
  el.classList.add("active");
  currentTab = tab;
  renderTests();
}
function updateStats(){
  document.getElementById("statCompleted").innerText = doneTests.length;
  document.getElementById("statSaved").innerText = savedTests.length;
}
function openProfile(){ document.getElementById("profileModal").style.display = "flex"; }
function toggleTheme(){
  if(document.body.getAttribute("data-theme")==="dark"){
    document.body.removeAttribute("data-theme"); localStorage.setItem("theme","light");
  } else {
    document.body.setAttribute("data-theme","dark"); localStorage.setItem("theme","dark");
  }
}

init();
</script>
</body>
</html>
