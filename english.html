<!DOCTYPE html>
<html>
<head>
<title>DSSSB MTS English CBT</title>
<style>
body{font-family:arial;background:#f2f2f2;margin:0}
header{background:#0b2c4d;color:#fff;padding:15px;font-size:22px}
#box{display:flex}
#left{width:75%;padding:20px;background:#fff}
#right{
  position:fixed;
  top:55px;
  right:0;
  width:220px;
  background:#e9ecef;
  padding:10px;
  height:calc(100vh - 55px);
  overflow-y:auto;
}
.qbtn{width:40px;height:40px;margin:5px;border:none;background:#ccc;cursor:pointer}
.attempted{background:#4caf50;color:white}
.current{border:2px solid red}
.review{background:orange;color:black}
.hidden{display:none}
button{padding:10px 15px;margin:10px}
#loginBox{
  background:white;
  padding:20px;
  text-align:center;
}
@media (max-width:768px){
  #right{width:100%;left:0;right:0;display:none;}
  #left{width:100%;}
}
</style>
</head>

<body>

<div id="loginBox">
<h2>DSSSB MTS ‚Äì Candidate Login</h2>
<input id="cname" placeholder="Enter Name" style="padding:10px;width:90%;"><br><br>
<input id="croll" placeholder="Enter Roll Number" style="padding:10px;width:90%;"><br><br>
<button onclick="startTest()" style="padding:10px 20px;background:#0b2c4d;color:white;border:none;">Start Test</button>
</div>

<header style="display:none" id="topbar">
DSSSB MTS ‚Äì English Language CBT (20 Questions)
<button onclick="togglePalette()" style="float:right;margin-left:10px;background:#ffc107;border:none;padding:6px 10px">‚ò∞ Questions</button>
<span id="timer" style="float:right">30:00</span>
</header>

<div id="box" style="display:none;">
<div id="left">
<h3 id="q"></h3>
<div id="opt"></div>
<button onclick="prev()">Previous</button>
<button onclick="next()">Next</button>
<button onclick="mark()">Mark for Review</button>
<button onclick="submit()">Submit</button>
</div>
<div id="right"></div>
</div>

<div id="scoreCard" style="display:none; padding:20px; background:#fff;">
<h2>RESULT SUMMARY</h2>
<p>Name: <b id="sname"></b></p>
<p>Roll No: <b id="sroll"></b></p>

<p>Total Questions: <span id="tq"></span></p>
<p>Attempted: <span id="att"></span></p>
<p>Not Attempted: <span id="na"></span></p>
<p>Correct: <span id="cor"></span></p>
<p>Wrong: <span id="wr"></span></p>
<h3>Score: <span id="scr"></span></h3>

<hr>
<h3>üèÜ Rank List</h3>
<table border="1" width="100%" id="rankTable"></table>

<hr>
<h3>‚ùå Wrong Questions</h3>
<div id="wrongList"></div>

<h3>‚ö™ Not Attempted</h3>
<div id="naList"></div>

<h3>üüß Marked for Review</h3>
<div id="reviewList"></div>

<button onclick="location.reload()" style="background:#28a745;color:white;border:none;padding:10px 20px;">Start New Test</button>
</div>

<script>
let qdata = [
["His answers are always _________, brief, and to the point.",
"lengthy","elaborate","detailed","concise",3,"Concise means brief and to the point."],

["Select the grammatically correct sentence.",
"She feels happily about the news.",
"He is the most smartest student in the class.",
"The flowers smell beautifully in the garden.",
"This is a unique painting.",3,"Unique already means one of a kind, so 'a unique' is correct."],

["Arrange the sentences to form a paragraph.",
"BADC","BDAC","BACD","DABC",2,"Ramesh felt desire ‚Üí quit job ‚Üí started volunteering ‚Üí NGO today."],

["Too many cooks spoil the broth means ‚Äî",
"Telling secrets to too many people can strain relationships.",
"It is better to hire experts to do complicated tasks.",
"Cooperation is key to completing a task successfully.",
"Too many people trying to manage something can ruin it.",3,"Too many people interfere ‚Üí work gets spoiled."],

["Parthip and Menaka ______ the strong bond they had built.",
"esteemed","elite","collectible","cherished",3,"Cherished means valued and loved."],

["Arrange the sentences about Saudi oil trade.",
"DBAC","ABCD","ABDC","DABC",0,"First Saudi decision ‚Üí currency peg ‚Üí India rupee ‚Üí long term benefit."],

["The invention of ______ printing press revolutionised _____ spread of knowledge.",
"a; a","no article needed; the","the; the","the; no article needed",1,"Printing press is general ‚Üí the spread of knowledge."],

["You cannot judge a book by its cover means ‚Äî",
"Books with plain covers are better written.",
"One should not make assumptions based on outward appearances.",
"Books must be judged by their content, not their appearance.",
"Judging is necessary for improvement.",1,"We should not judge by looks."],

["Arrange the Jane Goodall paragraph.",
"ACBD","DACB","CADB","BDCA",0,"Passion ‚Üí actions ‚Üí awards ‚Üí inspiration."],

["Antonym of Naive",
"Primitive","Terrible","Sophisticated","Radiant",2,"Naive = inexperienced; opposite = sophisticated."],

["___ Bible is one of the most widely read books in ___ world.",
"A; the","The; no article needed","No article needed; the","The; the",3,"The Bible and the world are specific."],

["Antonym of Incite",
"Cling","Calm","Belong","Deny",1,"Incite means provoke; opposite = calm."],

["A person excessively concerned with health",
"Hypochondriac","Misanthrope","Philanthropist","Sadist",0,"Hypochondriac worries too much about health."],

["We camped near _______ Himalayas and flew over ______ Arabian Sea.",
"a; a","the; the","the; an","a; the",1,"Names of mountain ranges and seas use 'the'."],

["Rohan‚Äôs lazy efforts ‚Äî",
"careless","harsh","sincere","dull",2,"Lazy is wrong; sincere fits the meaning."],

["She painted ___ unicorn beside ___ orange tree.",
"an; a","an; an","a; a","a; an",0,"Unicorn ‚Üí vowel sound, orange ‚Üí vowel."],

["Variety is the spice of life means ‚Äî",
"Different experiences make life enjoyable",
"Repetition is the key to happiness",
"Simplicity is better",
"Life is best when same",0,"Different things make life interesting."],

["A long speech by one person is called",
"Dialogue","Epilogue","Aside","Monologue",3,"One person speaking = monologue."],

["Point on the map means ‚Äî",
"a tapered sharp end",
"an item or idea",
"a particular place",
"an electrical socket",2,"Point here refers to a location."],

["Antonym of Lend",
"Bounce","Claim","Borrow","Accept",2,"Opposite of lend is borrow."]

];

let i=0, ans=[], t=1800;
let timer;

function startTest(){
 let n=document.getElementById("cname").value;
 let r=document.getElementById("croll").value;
 if(n==""||r==""){alert("Enter Name & Roll");return;}
 localStorage.setItem("cname",n);
 localStorage.setItem("croll",r);

 document.getElementById("loginBox").style.display="none";
 document.getElementById("topbar").style.display="block";
 document.getElementById("box").style.display="flex";

 startTimer();
 buildPalette();
 load();
}

function startTimer(){
 timer=setInterval(()=>{
  t--;
  let m=Math.floor(t/60), s=t%60;
  document.getElementById("timer").innerText=m+":"+(s<10?"0":"")+s;
  if(t==0) submit();
 },1000);
}

function buildPalette(){
 let pal="";
 for(let j=0;j<qdata.length;j++){
  pal+=`<button class="qbtn" id="b${j}" onclick="go(${j})">${j+1}</button>`;
 }
 document.getElementById("right").innerHTML=pal;
}

function load(){
 let q=qdata[i];
 document.getElementById("q").innerText=(i+1)+". "+q[0];
 let o="";
 for(let k=1;k<=4;k++){
  let checked=(ans[i]==k-1)?"checked":"";
  o+=`<label><input type="radio" name="opt" ${checked} onclick="sel(${k-1})"> ${q[k]}</label><br>`;
 }
 document.getElementById("opt").innerHTML=o;
}

function sel(x){
 ans[i]=x;
 let btn=document.getElementById("b"+i);
 btn.classList.add("attempted");
 btn.classList.remove("review");
}

function next(){ if(i<qdata.length-1){i++;load();}}
function prev(){ if(i>0){i--;load();}}
function go(n){i=n;load();}

function mark(){
 let btn=document.getElementById("b"+i);
 btn.classList.add("review");
}

function submit(){
 clearInterval(timer);
 let total=qdata.length, correct=0, attempted=0;
 let wrongHTML="", naHTML="", reviewHTML="";

 for(let j=0;j<total;j++){
  let q=qdata[j];
  let correctAns=q[q[5]+1];
  if(ans[j]===undefined){
    naHTML+=`<p>Q${j+1}. ${q[0]} <br><b>Correct:</b> ${correctAns}</p>`;
  }else{
    attempted++;
    if(ans[j]==q[5]) correct++;
    else wrongHTML+=`<p>Q${j+1}. ${q[0]}<br><b>Your:</b> ${q[ans[j]+1]}<br><b>Correct:</b> ${correctAns}<br><i>${q[6]}</i></p>`;
  }
  if(document.getElementById("b"+j).classList.contains("review")){
    reviewHTML+=`<p>Q${j+1}. ${q[0]}</p>`;
  }
 }

 document.getElementById("box").style.display="none";
 document.getElementById("topbar").style.display="none";
 document.getElementById("scoreCard").style.display="block";

 document.getElementById("sname").innerText=localStorage.getItem("cname");
 document.getElementById("sroll").innerText=localStorage.getItem("croll");

 document.getElementById("tq").innerText=total;
 document.getElementById("att").innerText=attempted;
 document.getElementById("na").innerText=total-attempted;
 document.getElementById("cor").innerText=correct;
 document.getElementById("wr").innerText=attempted-correct;
 document.getElementById("scr").innerText=correct+" / "+total;

 // Rank List
 let rankData=JSON.parse(localStorage.getItem("rankData")||"[]");
 rankData.push({name:localStorage.getItem("cname"), roll:localStorage.getItem("croll"), score:correct});
 rankData.sort((a,b)=>b.score-a.score);
 localStorage.setItem("rankData",JSON.stringify(rankData));

 let rt="<tr><th>Rank</th><th>Name</th><th>Roll</th><th>Score</th></tr>";
 rankData.forEach((x,i)=>{
  rt+=`<tr><td>${i+1}</td><td>${x.name}</td><td>${x.roll}</td><td>${x.score}</td></tr>`;
 });
 document.getElementById("rankTable").innerHTML=rt;

 document.getElementById("wrongList").innerHTML=wrongHTML||"None üéâ";
 document.getElementById("naList").innerHTML=naHTML||"None";
 document.getElementById("reviewList").innerHTML=reviewHTML||"None";
}

function togglePalette(){
 document.getElementById("right").classList.toggle("hidden");
}
</script>
</body>
</html>
