<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Admin Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
body { font-family: 'Poppins', sans-serif; background: #f3f4f6; padding: 15px; max-width: 600px; margin: auto; }
.card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); margin-bottom: 20px; }
h2, h3 { margin-top: 0; color: #333; font-size: 18px; }
input, select, textarea { width: 100%; padding: 12px; margin: 8px 0 15px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; font-family: inherit; font-size: 14px; }
button { padding: 12px 20px; background: #4361ee; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; width: 100%; font-size: 15px; transition: 0.2s; }
.copy-btn { background: #10b981; margin-top: 10px; }
.import-btn { background: #2d3748; }
.del-btn { color: #ef4444; cursor: pointer; padding: 5px; font-size: 18px; }
.badge { font-size: 12px; padding: 2px 6px; border-radius: 4px; background: #eee; margin-left: 5px; }
</style>
</head>
<body>

<div class="card" style="border: 2px dashed #4361ee; background: #eef2ff;">
  <h3>ğŸ“¥ Step 1: Import Old Data</h3>
  <textarea id="importBox" rows="3" placeholder="Paste const testDatabase = [...] here"></textarea>
  <button class="import-btn" onclick="importData()">Load Existing Data ğŸ”„</button>
</div>

<div class="card">
  <h3>â• Step 2: Add New Test</h3>
  
  <label>Test Title</label>
  <input type="text" id="tTitle" placeholder="e.g. MTS Full Mock Test 01">
  
  <label>Folder / Category</label>
  <select id="tCategory">
    <option value="mts-full">ğŸ¯ MTS Full Mock</option>
    <option value="asst-supt">ğŸ‘® Asst. Superintendent</option>
    <option value="english">English</option>
    <option value="reasoning">Reasoning</option>
    <option value="gk">GK</option>
    <option value="maths">Maths</option>
    <option value="hindi">Hindi</option>
  </select>
  
  <label>Test Link (URL)</label>
  <input type="text" id="tLink" placeholder="Paste link here...">
  
  <label>Badge</label>
  <select id="tBadge">
    <option value="">None</option>
    <option value="HOT">HOT ğŸ”¥</option>
    <option value="NEW">NEW âš¡</option>
    <option value="MOCK">MOCK ğŸ§ª</option>
  </select>
  
  <button onclick="addTest()">Add Test to List</button>
</div>

<div class="card">
  <h3>ğŸ“¤ Step 3: Get New Code</h3>
  <textarea id="output" rows="6" readonly></textarea>
  <button class="copy-btn" onclick="copyData()">Copy Final Code ğŸ“‹</button>
</div>

<div class="card">
  <h3>Current List (<span id="count">0</span>)</h3>
  <div id="list"></div>
</div>

<script>
let tests = JSON.parse(localStorage.getItem("adminData")) || [];
render();

function render(){
  const list = document.getElementById("list");
  list.innerHTML = "";
  tests.forEach((t, i) => {
    list.innerHTML += `
      <div class="item">
        <div><div style="font-weight:600; font-size:14px;">${t.title} <span class="badge">${t.category}</span></div></div>
        <span class="del-btn" onclick="del(${i})">ğŸ—‘ï¸</span>
      </div>`;
  });
  document.getElementById("count").innerText = tests.length;
  document.getElementById("output").value = `const testDatabase = ${JSON.stringify(tests, null, 2)};`;
}

function importData() {
  let input = document.getElementById("importBox").value;
  if(!input) return alert("Please paste code first!");
  try {
    let cleanJson = input.replace("const testDatabase =", "").replace(";", "").trim();
    tests = JSON.parse(cleanJson);
    localStorage.setItem("adminData", JSON.stringify(tests));
    render();
    alert("Data Loaded! âœ…");
    document.getElementById("importBox").value = "";
  } catch(e) { alert("Error! Copy exact code from data.js"); }
}

function addTest(){
  const title = document.getElementById("tTitle").value;
  const url = document.getElementById("tLink").value;
  if(!title || !url) return alert("Enter Title & Link");
  
  tests.push({
    id: "t" + Date.now(),
    title: title,
    category: document.getElementById("tCategory").value,
    url: url,
    badge: document.getElementById("tBadge").value,
    attempts: 0 
  });
  localStorage.setItem("adminData", JSON.stringify(tests));
  render();
  document.getElementById("tTitle").value = "";
  document.getElementById("tLink").value = "";
  alert("Test Added!");
}

function del(i){ if(confirm("Delete?")) { tests.splice(i, 1); localStorage.setItem("adminData", JSON.stringify(tests)); render(); } }
function copyData(){
  const c = document.getElementById("output");
  c.select(); c.setSelectionRange(0,99999); navigator.clipboard.writeText(c.value);
  alert("Code Copied! ğŸ“‹");
}
</script>
</body>
</html>
